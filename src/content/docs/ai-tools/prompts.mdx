---
title: AI Prompts for Varity
description: Ready-to-use prompts for building Varity apps with AI assistants
---

import { Tabs, TabItem, Aside, Card, CardGrid, Steps } from '@astrojs/starlight/components';

# AI Prompts for Varity

Copy these prompts into your AI assistant to build Varity apps faster. Each prompt gives your AI the full context it needs — SDK patterns, database API, authentication setup, and deployment commands.

## How to Use

<Tabs>
  <TabItem label="Cursor">
    1. Save the prompt as `.cursor/rules/varity.mdc` in your project root
    2. Cursor automatically loads the rules for every file in the project
    3. Start asking Cursor to build features — it knows Varity patterns
  </TabItem>
  <TabItem label="Claude Code">
    1. Copy the prompt content below
    2. Add it to your project's `CLAUDE.md` file
    3. Claude Code reads this file automatically on every conversation
  </TabItem>
  <TabItem label="Windsurf">
    1. Save the prompt as `.windsurfrules` in your project root
    2. Windsurf loads it automatically
    3. Compatible with the same format as Cursor rules
  </TabItem>
  <TabItem label="Any AI">
    1. Copy the prompt you need from below
    2. Paste it at the start of your conversation
    3. Follow up with your specific request
  </TabItem>
</Tabs>

---

## Varity App Development (Full Context)

This is the comprehensive prompt. It covers everything: SDK, database, auth, deployment, and template patterns. Use this as your `.cursor/rules/varity.mdc` or `CLAUDE.md`.

````markdown
# Varity Development Rules

## What is Varity
Varity provides packages and a CLI for building, deploying, and monetizing applications.
Packages: @varity-labs/sdk, @varity-labs/ui-kit, @varity-labs/types
CLI: varitykit (Python, installed via pip)

## Core Packages

### @varity-labs/sdk
- `db` — Database module. Usage: `import { db } from '@varity-labs/sdk'`
- `db.collection<T>('name')` — Returns typed collection with .get(), .add(), .update(id, partial), .delete(id)

### @varity-labs/ui-kit
- `PrivyStack` — Auth provider wrapper. Wrap your app root.
- `PrivyLoginButton` — Drop-in login button (email, Google, Twitter, Discord, GitHub)
- `PrivyProtectedRoute` — Wrapper that redirects unauthenticated users
- `PrivyUserProfile` — User profile display component
- `usePrivy()` — Hook returning { user, authenticated, logout, ready }
- `DashboardLayout` — Sidebar dashboard layout (desktop only, add mobile nav manually)

### @varity-labs/types
- TypeScript type definitions for all Varity interfaces

## Database Pattern
1. Define TypeScript interface in `src/types/index.ts`
2. Create collection accessor in `src/lib/database.ts`:
   ```typescript
   import { db } from '@varity-labs/sdk';
   import type { MyType } from '../types';
   export const myItems = () => db.collection<MyType>('my_items');
   ```
3. Build React hook in `src/lib/hooks.ts` with:
   - useState for data, loading, error
   - useCallback + useEffect for initial fetch via collection().get()
   - Optimistic create/update/delete with rollback on error
4. Use hook in page component

## Auth Pattern
```tsx
// Layout: Wrap app with PrivyStack
<PrivyStack appId={process.env.NEXT_PUBLIC_PRIVY_APP_ID}>
  {children}
</PrivyStack>

// Protected page: Wrap with PrivyProtectedRoute
<PrivyProtectedRoute>
  <DashboardContent />
</PrivyProtectedRoute>

// Get user info
const { user, authenticated, logout } = usePrivy();
const email = user?.email?.address;
```

## CLI Commands
- `varitykit doctor` — Check environment setup
- `varitykit init` — Scaffold new project from template
- `varitykit app deploy` — Deploy app (auto-detects static/dynamic)
- `varitykit app deploy --submit-to-store` — Deploy and submit to App Store

## Environment Variables (Next.js)
```
NEXT_PUBLIC_PRIVY_APP_ID=         # Auth (optional for dev, shared creds used)
NEXT_PUBLIC_VARITY_APP_ID=        # Your app ID (after deploy)
```

## Key Rules
- NEVER use blockchain/crypto terminology in user-facing code
- Use TypeScript interfaces for all data models
- Use optimistic UI updates in hooks (update state first, then API, rollback on error)
- Use `'use client'` directive for hooks and interactive components
- DashboardLayout has NO mobile support — implement mobile nav manually
- Database credentials are auto-injected at deploy time by the CLI
- For local dev, set NEXT_PUBLIC_VARITY_APP_TOKEN and NEXT_PUBLIC_VARITY_DB_PROXY_URL in .env.local, or build UI with mock data first
- .get() returns all docs — filter on client side (no server-side filtering)
````

<Aside type="tip">
This prompt is also available as a downloadable file at `/prompts/varity-app-development.md`
</Aside>

---

## Database Schema Design

Use this prompt when you want AI to help you design database collections and queries.

````markdown
# Varity Database Design Rules

## API
- Import: `import { db } from '@varity-labs/sdk'`
- Collection: `db.collection<T>('collection_name')` — returns typed collection
- Operations: .get(options?), .add(doc), .update(id, partial), .delete(id)
- .get() options: { limit?, offset?, orderBy? } — filter on client side

## Pattern: Type → Collection → Hook → Page

### Step 1: Define the type
```typescript
// src/types/index.ts
export interface Customer {
  id?: string;          // Auto-generated, always optional
  name: string;
  email: string;
  plan: 'free' | 'pro' | 'enterprise';
  createdAt: string;    // ISO string
}
```

### Step 2: Create collection accessor
```typescript
// src/lib/database.ts
import { db } from '@varity-labs/sdk';
import type { Customer } from '../types';
export const customers = () => db.collection<Customer>('customers');
```

### Step 3: Build hook with optimistic updates
```typescript
// src/lib/hooks.ts
export function useCustomers() {
  const [data, setData] = useState<Customer[]>([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);

  const refresh = useCallback(async () => {
    try {
      setLoading(true); setError(null);
      const result = await customers().get();
      setData(result as Customer[]);
    } catch (err) {
      setError(err instanceof Error ? err.message : 'Failed to load');
    } finally { setLoading(false); }
  }, []);

  useEffect(() => { refresh(); }, [refresh]);

  const create = async (input: Omit<Customer, 'id' | 'createdAt'>) => {
    const optimistic = { ...input, id: `temp-${Date.now()}`, createdAt: new Date().toISOString() };
    setData(prev => [optimistic, ...prev]);
    try {
      await customers().add({ ...input, createdAt: optimistic.createdAt });
      await refresh();
    } catch (err) {
      setData(prev => prev.filter(c => c.id !== optimistic.id));
      throw err;
    }
  };

  // update and remove follow same optimistic pattern
  return { data, loading, error, create, update, remove, refresh };
}
```

## Rules
- `id` is always `string | undefined` — Varity generates it
- Use ISO strings for dates (new Date().toISOString())
- Collection names should be snake_case plural (customers, order_items)
- Keep interfaces flat — no nested objects for now
- Filter on client side: `data.filter(item => item.projectId === id)`
````

---

## Add Authentication

````markdown
# Varity Authentication Setup

## Install
npm install @varity-labs/ui-kit

## 1. Wrap app with PrivyStack (layout.tsx)
```tsx
import { PrivyStack } from '@varity-labs/ui-kit';

export default function RootLayout({ children }) {
  return (
    <html><body>
      <PrivyStack appId={process.env.NEXT_PUBLIC_PRIVY_APP_ID}>
        {children}
      </PrivyStack>
    </body></html>
  );
}
```
No appId needed for development — shared credentials are used automatically.

## 2. Add login button
```tsx
import { PrivyLoginButton } from '@varity-labs/ui-kit';
<PrivyLoginButton />
```
Supports: Email (magic link), Google, Twitter, Discord, GitHub

## 3. Protect routes
```tsx
import { PrivyProtectedRoute } from '@varity-labs/ui-kit';
<PrivyProtectedRoute>
  <DashboardPage />  {/* Only shown when authenticated */}
</PrivyProtectedRoute>
```

## 4. Access user data
```tsx
import { usePrivy } from '@varity-labs/ui-kit';
const { user, authenticated, logout, ready } = usePrivy();
const email = user?.email?.address;
const name = email?.split('@')[0];
```

## Rules
- PrivyStack must wrap the entire app (in root layout)
- usePrivy() only works inside PrivyStack
- Check `ready` before rendering auth-dependent UI
- Check `authenticated` before showing protected content
- `user?.email?.address` — the primary user identifier
````

---

## Deploy to Varity

````markdown
# Varity Deployment

## Prerequisites
- pip install varitykit
- Node.js 18+
- A built React/Next.js app

## Deploy (static hosting)
```bash
npm run build
varitykit app deploy
```

## Deploy and submit to App Store
```bash
npm run build
varitykit app deploy --submit-to-store
```

## Environment Variables
Set in .env.local for development. On deploy, credentials are injected automatically.
```
NEXT_PUBLIC_PRIVY_APP_ID=         # Optional for dev
NEXT_PUBLIC_VARITY_APP_ID=        # Set after first deploy
```

## Check environment
```bash
varitykit doctor
```

## Common Issues
- "Module not found": Run npm install @varity-labs/sdk @varity-labs/ui-kit @varity-labs/types
- "CLI not found": Run pip install varitykit
- Build errors: Set `typescript: { ignoreBuildErrors: true }` in next.config.js during development
- Static export: Use `output: 'export'` in next.config.js. No dynamic routes ([id]) — use client-side state instead.
````

---

## Customize the SaaS Template

````markdown
# Customizing the Varity SaaS Template

## Template structure
```
src/
├── app/                    # Next.js pages
│   ├── page.tsx           # Landing page
│   ├── login/page.tsx     # Login page
│   └── dashboard/
│       ├── layout.tsx     # Dashboard layout (sidebar + mobile nav)
│       ├── page.tsx       # Dashboard home
│       ├── projects/      # Projects CRUD
│       ├── tasks/         # Tasks CRUD
│       ├── team/          # Team management
│       └── settings/      # Settings
├── lib/
│   ├── varity.ts          # SDK import (1 line: export { db } from '@varity-labs/sdk')
│   ├── database.ts        # Collection helpers
│   ├── hooks.ts           # React hooks for data
│   └── constants.ts       # App name, navigation items
├── types/
│   └── index.ts           # TypeScript interfaces
└── components/ui/         # Shared UI components
```

## Change branding
1. `src/lib/constants.ts` — Change APP_NAME
2. `src/app/globals.css` — Change CSS variables (:root { --color-primary-* })
3. `tailwind.config.js` — Colors reference CSS variables

## Add a new page
1. Create `src/app/dashboard/new-page/page.tsx`
2. Add to NAVIGATION_ITEMS in `src/lib/constants.ts`

## Add a new data model
1. Define interface in `src/types/index.ts`
2. Add collection in `src/lib/database.ts`
3. Create hook in `src/lib/hooks.ts` (copy useProjects pattern)
4. Build page component using the hook

## Navigation
Edit NAVIGATION_ITEMS in constants.ts:
```typescript
{ label: 'My Page', icon: 'star', path: '/dashboard/my-page' }
```
Available icons: dashboard, folder, list, people, settings, star
````

---

## Download Prompts

All prompts are available as plain text files you can download directly:

- [Varity App Development (Full)](/prompts/varity-app-development.md) — Complete development context
- [Database Schema Design](/prompts/database-schema-design.md) — Database patterns
- [Deployment Guide](/prompts/deployment-guide.md) — CLI and deploy commands
- [Customize Template](/prompts/customize-template.md) — Template customization

## Next Steps

- [Quick Start](/getting-started/quickstart) — Build your first app
- [SaaS Starter Template](/templates/saas-starter) — Explore the template
- [AI Tools Overview](/ai-tools/overview) — All AI integrations
