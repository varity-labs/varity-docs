---
title: "File Storage Quick Start"
description: "Upload and retrieve files with secure storage"
---

import { Steps, Tabs, TabItem, Aside } from '@astrojs/starlight/components';
import Accordion from '../../../../components/Accordion.astro';
import PageMeta from '../../../../components/PageMeta.astro';

<PageMeta
  author="Varity Team"
  authorRole="Core Contributors"
  lastUpdated="February 2026"
  stability="stable"
/>

Upload files to secure, globally distributed storage. Files are replicated across multiple regions and accessible via permanent URLs.

## What You Get

- **Secure storage** - Files stored across multiple servers
- **Permanent URLs** - Content-addressed links that never break
- **Global CDN** - Fast access worldwide
- **No vendor lock-in** - Standard protocols

## Installation

<Tabs>
  <TabItem label="npm">
    ```bash
    npm install @varity-labs/sdk
    ```
  </TabItem>
  <TabItem label="pnpm">
    ```bash
    pnpm add @varity-labs/sdk
    ```
  </TabItem>
  <TabItem label="yarn">
    ```bash
    yarn add @varity-labs/sdk
    ```
  </TabItem>
</Tabs>

## Setup

```typescript
import { createVaritySDK } from '@varity-labs/sdk';

// Initialize the SDK
const sdk = createVaritySDK();
// Network is configured automatically

await sdk.connect();
```

## Upload a File

<Steps>

1. **Get the file from user input**

   ```tsx
   function FileUpload() {
     const handleUpload = async (e) => {
       const file = e.target.files[0];
       // Upload in next step
     };

     return <input type="file" onChange={handleUpload} />;
   }
   ```

2. **Upload to secure storage**

   ```tsx
   const handleUpload = async (e) => {
     const file = e.target.files[0];

     const result = await sdk.storage.upload(file);

     console.log('Uploaded to:', result.url);
     // Returns a permanent HTTPS URL
   };
   ```

3. **Display the file**

   ```tsx
   // The URL is a standard HTTPS link â€” works in any browser
   <img src={result.url} alt="Uploaded file" />
   <a href={result.url} target="_blank">View File</a>
   ```

</Steps>

## Download a File

```typescript
const response = await sdk.storage.download(fileUrl);

// Get the data in different formats
const blob = await response.blob(); // For images, videos, etc.
const text = await response.text(); // For text files
const json = await response.json(); // For JSON files
```

## Complete Example

```tsx
import { createVaritySDK } from '@varity-labs/sdk';
import { useState } from 'react';

const sdk = createVaritySDK();
// Network is configured automatically

function FileManager() {
  const [fileUrl, setFileUrl] = useState('');
  const [uploading, setUploading] = useState(false);

  const handleUpload = async (e) => {
    const file = e.target.files[0];
    if (!file) return;

    setUploading(true);
    try {
      const result = await sdk.storage.upload(file);
      setFileUrl(result.url);
    } catch (error) {
      console.error('Upload failed:', error);
    } finally {
      setUploading(false);
    }
  };

  return (
    <div>
      <input type="file" onChange={handleUpload} disabled={uploading} />
      {uploading && <p>Uploading...</p>}
      {fileUrl && (
        <div>
          <p>File stored successfully</p>
          <a href={fileUrl} target="_blank">
            View File
          </a>
        </div>
      )}
    </div>
  );
}
```

## Upload JSON Metadata

```typescript
const metadata = {
  name: 'My Item',
  description: 'A cool item',
  attributes: [
    { trait_type: 'Color', value: 'Blue' },
  ],
};

const result = await sdk.storage.upload(metadata);
console.log('Metadata URL:', result.url);
```

## Upload Multiple Files

```typescript
const files = [file1, file2, file3];

const results = await sdk.storage.uploadBatch(files);

// Returns array of URLs
results.forEach(r => console.log(r.url));
```

<Aside type="tip">
**Batch uploads** are more efficient than uploading files one at a time.
</Aside>

## Storage Costs

- **Beta**: Free with shared credentials
- **Production**: Based on storage used

## Best Practices

### Optimize Images

Compress images before upload:

```typescript
import imageCompression from 'browser-image-compression';

const compressedFile = await imageCompression(file, {
  maxSizeMB: 1,
  maxWidthOrHeight: 1920,
});

await sdk.storage.upload(compressedFile);
```

### Cache Results

Store URLs for quick access:

```tsx
// Save to localStorage
localStorage.setItem('userAvatar', fileUrl);

// Retrieve later
const savedUrl = localStorage.getItem('userAvatar');
```

<Accordion title="Advanced: Direct Storage API">

**Varity manages these credentials automatically. Only use this if you need custom configuration.**

For power users who need lower-level control, you can use the storage provider directly.

```typescript
import { createThirdwebClient } from 'thirdweb';
import { upload, download } from 'thirdweb/storage';

const client = createThirdwebClient({
  clientId: process.env.NEXT_PUBLIC_THIRDWEB_CLIENT_ID,
});

// Upload directly
const uri = await upload({
  client,
  files: [file],
});

// Convert storage URI to HTTPS URL
const fileUrl = uri.replace(
  'ipfs://',
  'https://ipfs.thirdwebcdn.com/ipfs/'
);

// Download directly
const response = await download({
  client,
  uri: 'ipfs://bafybei...',
});
```

This gives you direct access to the underlying storage protocol for advanced use cases like pinning, custom gateways, or cross-platform interoperability.

</Accordion>

## Next Steps

- [Upload Guide](/build/storage/upload) - Advanced upload options
- [Retrieve Guide](/build/storage/retrieve) - Download and display files
- [SDK Reference](/packages/sdk/overview) - Full SDK documentation
