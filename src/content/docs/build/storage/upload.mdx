---
title: Uploading Files
description: Upload files, images, and data to secure storage
---

import { Aside } from '@astrojs/starlight/components';
import Accordion from '../../../../components/Accordion.astro';
import PageMeta from '../../../../components/PageMeta.astro';

<PageMeta
  author="Varity Team"
  authorRole="Core Contributors"
  lastUpdated="February 2026"
  stability="stable"
/>

# Uploading Files

Upload any type of file to secure storage with automatic redundancy and CDN delivery.

## Basic File Upload

Upload a file from a file input:

```tsx
import { createVaritySDK } from '@varity-labs/sdk';

const sdk = createVaritySDK();
// Network is configured automatically

// Get file from input
const fileInput = document.querySelector('input[type="file"]');
const file = fileInput.files[0];

// Upload to secure storage
const result = await sdk.storage.upload(file);

console.log('File URL:', result.url);
// Returns a permanent HTTPS URL
```

## Upload Result

The upload method returns an object with the file URL:

```tsx
const result = await sdk.storage.upload(file);
// Returns: { url: "https://...", id: "..." }

// For multiple files
const results = await sdk.storage.uploadBatch([file1, file2, file3]);
// Returns array of { url, id } objects

// Display the file
<img src={result.url} alt="Uploaded file" />
```

## Upload JSON Data

Store structured data:

```tsx
const userData = {
  name: 'John Doe',
  email: 'john@example.com',
  preferences: {
    theme: 'dark',
    notifications: true,
  },
};

const result = await sdk.storage.upload(userData);
console.log('Data URL:', result.url);
```

## Upload Metadata with Image

Upload image first, then metadata referencing it:

```tsx
// Step 1: Upload the image file
const imageResult = await sdk.storage.upload(imageFile);

// Step 2: Upload metadata with the image URL
const metadata = {
  name: 'My Item #1',
  description: 'A unique digital item',
  image: imageResult.url,
  attributes: [
    { trait_type: 'Color', value: 'Blue' },
    { trait_type: 'Size', value: 'Large' },
  ],
};

const metadataResult = await sdk.storage.upload(metadata);
console.log('Metadata URL:', metadataResult.url);
```

## Batch Upload

Upload multiple files at once:

```tsx
const files = [file1, file2, file3];

const results = await sdk.storage.uploadBatch(files);

console.log('Total files uploaded:', results.length);

results.forEach((result, index) => {
  console.log(`File ${index + 1}: ${result.url}`);
});
```

## Upload from Blob

Create and upload data programmatically:

```tsx
// Text file from Blob
const textBlob = new Blob(['Hello, World!'], { type: 'text/plain' });
const textResult = await sdk.storage.upload(textBlob);

// JSON data (can pass object directly)
const jsonData = { hello: 'world' };
const jsonResult = await sdk.storage.upload(jsonData);

// Canvas to image
const canvas = document.querySelector('canvas');
canvas.toBlob(async (blob) => {
  const imageResult = await sdk.storage.upload(blob);
  console.log('Canvas uploaded:', imageResult.url);
}, 'image/png');
```

## Storage Provider

Uploads go to secure storage by default with automatic redundancy:

```tsx
const result = await sdk.storage.upload(file);
// Returns a permanent URL with global CDN delivery
```

<Aside type="tip">
**Automatic redundancy** - Uploads are automatically replicated by the storage infrastructure. Your files are always available.
</Aside>

**Why secure storage?**
- Fast, distributed access
- Content-addressed (files never break)
- Automatic redundancy across multiple servers
- Perfect for most use cases

## Error Handling

Handle upload errors gracefully:

```tsx
async function safeUpload(file: File) {
  try {
    const result = await sdk.storage.upload(file);
    return { success: true, url: result.url };
  } catch (error) {
    const message = error instanceof Error ? error.message : 'Unknown error';

    if (message.includes('File too large')) {
      return { success: false, error: 'File exceeds size limit' };
    }
    if (message.includes('Network') || message.includes('fetch')) {
      return { success: false, error: 'Network error. Please try again.' };
    }

    return { success: false, error: 'Upload failed. Please try again.' };
  }
}
```

<Accordion title="Advanced: Direct Storage API">

**Varity manages these credentials automatically. Only use this if you need custom configuration.**

For lower-level control, you can use the storage provider directly:

```tsx
import { createThirdwebClient } from 'thirdweb';
import { upload } from 'thirdweb/storage';

const client = createThirdwebClient({
  clientId: process.env.NEXT_PUBLIC_THIRDWEB_CLIENT_ID,
});

const uri = await upload({
  client,
  files: [file],
});

// Returns: ipfs://bafybei... (permanent storage identifier)

// Convert to gateway URL for browser access
const gatewayUrl = uri.replace('ipfs://', 'https://ipfs.thirdwebcdn.com/ipfs/');
```

This gives you direct access to IPFS URIs and custom gateway configuration for advanced use cases.

</Accordion>

## Next Steps

- [Retrieve Files](/build/storage/retrieve) - Download and display files
- [Payments Quick Start](/build/payments/quickstart) - Accept payments
